name: Evaluate spam detection
model: openai/gpt-4o-mini
messages:
  - role: system
    content: "" # Since it's not a fix value, it should be generated and replaced at runtime
  - role: user
    content: "{{input}}" # This will be replaced by `gh models eval` from `testData` below
evaluators:
  - name: assert response
    string:
      equals: "{{expected}}"
testData:
  - name: spam, two words
    expected: FAIL
    input: |
      <COMMENT>
      Account
      </COMMENT>
  - name: spam, a hyperlink only
    expected: FAIL
    input: |
      <COMMENT>
      [File-2025-07-04.pdf](https://github.com/user-attachments/files/12345678/File-2025-07-04.pdf)
      </COMMENT>
  - name: spam, empty body
    expected: FAIL
    input: |
      <COMMENT>
      </COMMENT>
  - name: spam, gibberish
    expected: FAIL
    input: |
      <COMMENT>
      qwerty zxcvbn asdfghjkl
      </COMMENT>
  - name: spam, single word
    expected: FAIL
    input: |
      <COMMENT>
      Help
      </COMMENT>
  - name: not spam, valid question
    expected: PASS
    input: |
      <COMMENT>
      I'm trying to set up authentication for my application using this library, but I'm running into issues with the OAuth flow. Has anyone successfully implemented this? Here's what I've tried so far:

      1. Set up the OAuth app in GitHub
      2. Configured the callback URL
      3. Added the client ID and secret to my environment variables

      But I'm getting a 401 error when trying to authenticate. Any suggestions?
      </COMMENT>
  - name: not spam, feature request
    expected: PASS
    input: |
      <COMMENT>
      It would be great if this project supported custom themes. Many users prefer dark mode or have specific color preferences. 

      Proposed implementation:
      - Add a theme configuration file
      - Support CSS variables for customization
      - Include a few built-in themes (light, dark, high contrast)

      This would greatly improve accessibility and user experience.
      </COMMENT>
  - name: not spam, bug report
    expected: PASS
    input: |
      <COMMENT>
      ### Description
      The application crashes with an out-of-memory error when processing files larger than 500MB.

      ### Steps to Reproduce
      1. Open the application
      2. Try to load a file larger than 500MB
      3. Observe the crash

      ### Expected Behavior
      The application should handle large files gracefully, possibly with streaming or chunked processing.

      ### Actual Behavior
      Application crashes with: `java.lang.OutOfMemoryError: Java heap space`

      ### Environment
      - OS: Ubuntu 22.04
      - Java Version: 17
      - Application Version: 2.3.1
      </COMMENT>
  - name: not spam, community discussion
    expected: PASS
    input: |
      <COMMENT>
      I've been using this framework for a few months now and I'm curious about what testing strategies the community recommends.

      Currently, I'm using:
      - Unit tests for individual components
      - Integration tests for API endpoints
      - End-to-end tests for critical user flows

      What are others doing? Are there any testing tools or patterns that work particularly well with this framework?

      I'd love to hear your experiences and recommendations!
      </COMMENT>
  - name: spam, promotional content
    expected: FAIL
    input: |
      <COMMENT>
      Buy cheap products at example.com! 50% discount! Click here now!!!
      </COMMENT>
  - name: not spam, helpful response
    expected: PASS
    input: |
      <COMMENT>
      You need to set the callback URL in your OAuth app settings to match your deployment URL. For local development, use http://localhost:3000/callback
      </COMMENT>
  - name: spam, crypto promotion
    expected: FAIL
    input: |
      <COMMENT>
      ðŸ”¥ðŸ”¥ðŸ”¥ AMAZING CRYPTO OPPORTUNITY!!! ðŸ’°ðŸ’°ðŸ’° Join now at scam-site.com
      </COMMENT>
